多特征信息融合的疲劳驾驶检测系统设计

马嘉健，赵海茹*，付    坤，丁   敏

（玉溪师范学院 物理与电子工程学院，云南 玉溪 653100）

［关键词］疲劳驾驶 ；多特征 ；信息融合 ；单片机

［摘    要］为了降低由于驾驶员疲劳驾驶造成的交通事故发生率，设计一种疲劳驾驶检测系统对驾驶

员状态进行实时检测和反馈 . 研究将人体生理以及外部环境检测模块、提示动作模块、人脸疲劳检测模块

和信息接收处理模块进行整合，并将 PERCLOS 疲劳特征检测、FA 检测和生理检测三种方法融合在一起，实

现了对驾驶员状态的检测 . 实验表明，多特征融合检测方法检测准确率较好，正常情况能够有效的保障驾

驶员的驾驶安全 .

［中图分类号］TP391［文献标识码］A［文章编号］1009-9506（2021）06-0043-06

疲劳驾驶在各国一直被认为是汽车驾驶安全的头号问而备受重视 . 公安部交通管理科学研究所中国

道路交通事故统计年报（2019 年度）显示，由于疲劳驾驶而导致的交通事故占所有交通事故的 27%，而因

疲劳驾驶引起的交通事故死亡人数占所有交通事故死亡总人数的 74%. 交通事故就发生在几秒钟的时间

内 . 已有研究显示，如果系统能提前 2 秒预警将能减少 92% 的交通事故，提前 0.5 秒预警，将会减少 73%

的交通事故 .

近几年，我国在交通方面的事故发生率始终处于世界前列，而由疲劳驾驶引发的交通事故占比很

高 . 但目前的疲劳检测手段以及使用范围有限，主要有人工突击检查和行车记录仪，这些措施不能及时发

现和预报驾驶员的疲劳程度，未能发挥提前预防作用 . 驾驶疲劳检验系统并没有形成很完善的市场，依旧

处于红蓝交界的一种状态 . 一些单位如清华大学、北京理工大学、吉林大学通过驾驶员驾驶时生理状况参

数 ( 如心率、温度、呼吸频率及呼吸深度等生理指标 ) 提取疲劳状态来得到特征值进行判断，但其中大多数

的研究还停留在理论或实验阶段，即使是已经产品化的研究成果，也因为准确性和实用性等问题，难以全

面推广应用 .

疲劳驾驶检测技术目前全世界有很多国家都有研究，西班牙的 B.Delgado 等提出了一种非接触式的驾

驶员疲劳驾驶的检测方法，只是检测了眼部特征，还未能做到全面检测 [2] ；意大利的 T.D’Orazio 等研究基

于视觉的疲劳驾驶预警系统，也提出了眼睛检测算法，但有局限，当驾驶员佩戴上深色墨镜时就会检测失

败 [3]. 沃尔沃的驾驶员状态警示系统能根据车辆的行驶轨迹来推断驾驶员的疲劳状况，并能向驾驶员提出

［基金项目］玉溪师范学院大学生创新创业训练计划项目（基于人脸识别的疲劳驾驶检测系统的设计与实现，201811390001）；云南省高校重点

实验室建设计划（多 AGV 路径规划与避障算法的研究）.

［作者简介］马嘉健，研究方向 ：电气工程及自动化 .

［通讯作者］赵海茹，硕士研究生，助教，研究方向为控制系统仿真与优化，zhr@yxnu.edu.cn.

—  43  —

玉溪师范学院学报（第37卷）2021年第6期    Journal of Yuxi Normal University  Vol.37  No.6  Nov.2021警告，这样的技术还不能准确判断疲劳状态 . 即使判断出驾驶员的疲劳状态，对于高速行驶的汽车来说也

很难及时阻止事故发生 . 目前疲劳驾驶检测的产品只是在国外的高配车中才进行配置 . 此外，还有一些通

过眼睛眨动状态、方向盘转角速度、加速度、油门踩踏板以及外部环境参数来对驾驶员疲劳状态做出判断

的技术，这些判断技术基本上是驾驶员处于疲劳状态下已经发生了一定危险时才能反馈的，其实时性和准

确性较差，且容易出现漏判 .

因此，设计一种疲劳检测系统来减少交通事故的发生率显得很有必要 . 通过调查，人在疲劳的状态

下，面部特征能有效反应疲劳状态 . 为此，本文通过面部特征提取和生理状况检测来反馈疲劳信息 [1]，并

将其传到终端进行判断 . 一旦处于疲劳状态，系统便会发出语音和振动，提醒驾驶员停车休息 . 另外，还

能通过头戴的 EEG 装置对大脑脑电波进行检测，判断是否疲劳并进行唤醒，帮助消除睡意，使驾驶员清

醒 . 通过技术的融合来检测驾驶员是否疲劳驾驶，从而对疲劳驾驶的驾驶员进行提醒，这样能有效减少交

通事故的发生 .

1 疲劳驾驶检测系统结构设计

本文设计的疲劳驾驶检测系统结构如图 1 所示，该系统主要由 4 个部分组成，分别是人体生理以及外

部环境检测部分、提示动作部分、人脸疲劳检测部分和信息接收处理部分 . 其中，人体生理以及外部环境

检测部分由心率模块、气敏模块和 EEG 生理检测装置组成 [4]，提示动作包括震动和语音两种类型 [5]，人脸

疲劳检测部分由 PC 端和摄像头组成，信息接收处理部分由 STM32F103ZET6 单片机来完成相应任务 .

此系统中的 EEG 测量装置又称为脑电测量装置或脑电图，是通过对正常状态下和疲劳状态下脑电波

不同频带的频谱进行对比来判断疲劳程度 [6]. 通过将不同波段的 EEG 信号结合在一起进行综合分析，进

而得到合适的组合参数，不仅能对不同波段 EEG 信号的各自的特点进行充分的利用，而且能通过参数的

结合使得检测结果更加准确和全面 .

心率模块

气敏模块

STM32F103ZET6

EEG 装置

震动提醒

语音提醒

PC

摄像装置

图 1   系统结构图

该系统的工作原理为 ：首先利用人脸疲劳检测部分中的 dlib 库实现，摄像头提取驾驶员的图像传回

PC 端，将图像进行灰度处理 . 然后利用已经调校好的人脸关键点检测器 HOG Face Detector 对人脸检测并

画出人脸部分，并在人脸检测的基础上进行人脸对齐，找到眼睛、鼻子、嘴和脸轮廓等 . 然后对眼睛和嘴部

进行跟踪检测 . 最后利用人脸模型进行人脸检验和人脸识别 . 在此过程中，配合 PERCLOS 算法进行疲劳

值检测，实时检测疲劳值是否达到阈值，检测到的数据通过 PC 端硬件串口反馈给 STM32 单片机 . 人体生

理以及外部分的环境检测部分作为协助 . 其中，EEG 测量装置是通过对正常状态下和疲劳状态下脑电波

不同频带的频谱进行对比来判断疲劳程度，并把该数据反馈给 STM32 单片机 ；心率模块实时检测人的心

率是否在一个正常的范围内，当心率异常时将信号反馈给 STM32 单片机做出相应的提醒和动作 ；气敏模

—  44  —

玉溪师范学院学报块检测驾驶员的酒精浓度 . 结合其他模块传回的信息，STM32 单片机进行分析做出对应的提示和动作，并

把输出的指令传给提示动作部分对应的模块，语音模块提示驾驶员处于疲劳状态和酒后驾驶状态 ；震动

模块针对不同情况输出不同程度的震动 .

2 疲劳驾驶检测系统软件设计

当汽车起动时，检测系统对各部分进行初始化，通过气敏模块对驾驶员进行酒精检测，当酒精浓度大

于 20mg/100ml，而小于 80mg/100ml 时记为酒驾，进行弱震动并报警，提醒驾驶员停车 ；如果酒精浓度超

过 80mg/100ml 时，则记为醉驾，此时立即进行强震动并报警，提醒驾驶员停车 . 在检测酒精浓度的同时开

启 PC 端摄像头对驾驶员进行人脸信息采集，此时 PERCLOS 与 FA 检测同时进行，对驾驶员疲劳度进行评

估 .PERCLOS 检测时，如果疲劳阈值大于等于 0.12 以上则为轻度疲劳，此时系统进行弱震动提醒 ；然后系

统再次进行疲劳阈值比较，如果大于等于 0.25 则说明驾驶员处于重度疲劳，此时系统进行强震动并报警，

提醒驾驶员停车休息 ；如果小于阈值则返回继续检测 .FA 检测时，检测装置得到的阈值如果大于等于 2.5，

则说明驾驶员疲劳驾驶，此时立即对驾驶员进行强震并报警 . 在进行驾驶员疲劳程度检测的同时也进行

心率检测，如果检测到心率与正常状态下不同，说明出现疲劳，则对驾驶员进行震动报警提醒，提醒驾驶员

停车休息 . 该系统实现疲劳检测的流程图如图 2 所示 .

开始

系统初始化

识别驾驶员

PERCLOS 检测

疲劳阈值
>=0.12

是

弱震动

疲劳阈值
>=0.25

是

强震动并报警

否

否

心率是
否正常

否

震动报警

否

车辆是否停止

是

结束

FA 检测

否

酒精尝试检测

是否检测
到酒精？

是

否

疲劳阈值
>=2.5

是

强震动并报警

否

是否醉驾？

弱震动并报警

是

强震动并报警

图 2   融合多特征疲劳检测流程图

3 疲劳检测算法及实验分析

本文设计的疲劳驾驶检测系统采用开源机库 Dlib 提供的人脸检测器（HOG Face Detector）来检测人

脸，该人脸检测器模型是基于 HOG 特征和 SVM 的一种人脸检测模型，检测过程包括以下 5 个步骤 .

—  45  —

马嘉健，赵海茹，付  坤，丁  敏：多特征信息融合的疲劳驾驶检测系统设计3.1 眼部疲劳的判断.

通过计算眼睛的纵横比来判断，即利用图像提取到的特征点，睁闭眼过程中，采用 EAR 来度量双眼的

闭合度 [8]，计算如下 ：

EAR = 

|M37 - M41| + |M38 - M40|
2|N36 - N39|

当 EAR 变小时，双眼开合程度在变小，表明驾驶员在进行睁闭眼动作 . 统计驾驶员在正常状态下的

睁闭眼频率得到一个阈值，当小于该阈值时，则可以说明驾驶员眼睛闭合 .

3.2 嘴部疲劳判断.

系统根据上述眼部 EAR 的形式，采用 MAR 来表示嘴部打哈欠时嘴部张闭的纵横比来计算开合度，公

式如下 ：

MAR = 

|M50 - M58| + |M52 - M56|
2|N48 - N54|

上述两式中所用的点为面部的特征点，其中 M、N 表示特征点的横纵坐标 .

打哈欠时嘴部张开程度在一定时间内逐渐增大，嘴部宽高比 MAR 变大则说明在一定时间内嘴部的开

合程度在增大，同 EAR 一样，有一个阈值来表明疲劳程度 .

3.3 PERCLOS疲劳特征检测.

PERCLOS 算法被认为是机动车辆最有效的、便携的、实时的、非接触式的疲劳测评方法 .PERCLOS

（Percentage of eyelid closure over the pupil over time）算法是通过计算单位时间内眼睛闭合时间占总时间的

比值 [9]. 通常 PERCLOS 方法中 P80 检测比较准确，P80 是表示当瞳孔面积有超过 80% 被眼睑遮住时，就

认为眼睛处于闭合状态，统计在一定时间内眼睛闭合时间占总时间的比例 . 图 3 为用 PERCLOS 的检测原

理，根据图 3 可知计算眼睛开度 Z 的方法为 ：Z = 

Z

眼

睛

开

度

(t3 - t2)
(t4 - t1)

最大瞳孔

80% 瞳孔

20% 瞳孔

0

t1

t2

t3

t4

t

图 3   PERCLOS 算法原理图

根据表 1 的统计数据以及相关研究，当阈值 Z>0.12 时判定检测对象出现疲劳状态，而当阈值 Z>0.25

时检测对象出现重度疲劳状态 .

                      表 1                                                   PERCLOS 分析结果

样本

样本 1

样本 2

总帧数

闭眼帧数

PERCLOS%

900

900

76

211

8.44

23.44

疲劳状态

正常状态

疲劳驾驶状态

—  46  —

玉溪师范学院学报3.4 两特征融合（EAR和MAR融合为FA）.

由于驾驶员在疲劳时，通常在打哈欠的同时会产生闭眼的动作，因此将眼部疲劳特征与嘴部疲劳特征

融合，作为疲劳预估值 FA(fatigue assessment)，以提高疲劳驾驶检测结果的准确率 .FA 的计算方式为 ：

FA= 

MAR
EAR

为了让系统检测结果准确度更高，根据已有的研究，通常设定 MAR/EAR 阈值为 2.5，超过阈值连续 2s 

时判定为疲劳状态，此时疲劳检测成功率较优 .

3.5 多特征融合

本文设计的多特征信息融合是指将 PERCLOS 检测、FA 检测和生理检测三种方法结合起来，这三种

方法在检测时是并行的，当其中的一项或者一项以上检测结果超过阈值后就判定驾驶员为疲劳状态，认定

为疲劳驾驶，其检测流程见图 2 所示 .

3.6 实验分析

通过录制多名驾驶员在实际道路上的行驶过程视频，采集其实际情况下的面部图像数据，然后将该数

据进行分段处理，提取出共 300 个具有有效的驾驶员面部表情特征的片段作为实验检测的样本，样本数据

的驾驶员状态如表 2 所示 . 对每个样本使用两特征融合检测和多特征融合检测，其检测结果如表 3 和表 4

所示 . 对比两种检测方法对驾驶员正常状态和疲劳驾驶状态的检测结果可知，本文设计的多特征融合检

测方法具有更高的检测准确率，检测效果更优 .

                                   表 2                                               样本数据

样本

类型 1

类型 2

驾驶员状态

正常状态

疲劳驾驶状态

        总计                                   ——

样本个数

268

32

300

                                   表 3                                        两特征融合检测结果

样本

类型 1

类型 2

驾驶员状态

误检测数量

准确率 %

正常状态

疲劳驾驶状态

21

3

92.2

90.6

                                   表 4                                         多特征融合检测结果

样本

类型 1

类型 2

驾驶员状态

误检测数量

准确率 %

正常状态

疲劳驾驶状态

8

2

97.0

93.8

4 结    论

针对目前社会上普遍存在的疲劳驾驶问题，本文将人体生理以及外部环境检测模块、提示动作模块、

人脸疲劳检测模块和信息接收处理模块整合在一起设计了疲劳驾驶检测系统 . 该系统将 PERCLOS 疲劳

特征检测、FA 检测和生理检测三种方法融合在一起对驾驶员状态进行检测，当其中的一项或者一项以上

—  47  —

马嘉健，赵海茹，付  坤，丁  敏：多特征信息融合的疲劳驾驶检测系统设计检测结果超过阈值后就判定驾驶员为疲劳驾驶状态 . 实验分析表明，本文设计的多特征融合检测方法能

有效提高检测准确率，有利于避免因疲劳驾驶而发生交通事故 .

参考文献 ：

[1] 孙洋，李汉林，邓晓慧，等 .  基于 OpenCV 与 STM32 的驾驶员健康监控系统设计 [J].  高师理科学刊，2021，41（2）：

41-45.

[2]Garcia L, Bronte S, Bergasa L.M..Vision-based Drowsiness Detector for a RealisticDriving Simu-lator[J].13th International 

IEEE Annual Conference on Intelligent  Transportation Systems，2010 ：887-894．

[3]T.D’Orazio T，Leo M，Guaragnella C，et al.A Visual Approach for Driver Inattention Detection[J].Pattern Recognition，2007，

40（8）：2341-2355．

[4] 孙洋，孙新宇，李珺珺，等 . 基于 Dlib 库的驾驶员疲劳及心率血氧检测系统设计 [J]. 电子技术与软件工程，2021（2）：

108-110.

[5] 谢珩，黄余凤，郑宇贤 . 基于 STM32 的智能语音提醒器设计 [J]. 电脑知识与技术，2018, 14（22）：173-175.

[6] 张兆瑞，赵群飞，张朋柱 . 基于 GRNN 的可穿戴式脑电仪 EEG 疲劳检测 [J]. 高技术通讯，2019，29（3）：266-273.

[7] 毛夏煜，王雨凡，牛迁迁，等 . 基于单片机的车载酒精检测系统 [J]. 电脑知识与技术，2020，16（24）：224-225.

[8] 胡习之，黄冰瑜 . 基于面部特征分析的疲劳驾驶检测方法 [J]. 科学技术与工程，2021, 21（4）：1629-1636.

[9] 刘英 . 基于 PERCLOS 的驾驶疲劳检测系统 [J]. 现代制造技术与装备，2018（7）：174、176.

Design of Fatigue Driving Detection System Based on Multi-Feature Information Fusion
MA Jiajian, ZHAO Hairu, FU Kun, DING Min

(School of Physics and Electronic Engineering, Yuxi Normal University, Yuxi, Yunnan 653100, China)

Key words: fatigue driving; multi-features; information fusion; single chip microcomputer

Abstract: To reduce the traffic accidents caused by fatigue driving, a system was designed for real-time detection and 

feedback of drivers’ status. The research integrates human physiology and external environment detection module, prompt action 

module, face fatigue detection module and information receiving and processing module.  Driver status detection is achieved by 

combining PERCLOS fatigue feature detection, FA detection and physiological detection together. Experiments show that the 

multi-feature detection method is accurate in detection and can eﬀectively protect drivers under normal conditions.

—  48  —

玉溪师范学院学报